2025-06-06 08:11:29.908 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 761828 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 08:11:29.911 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 08:11:29.912 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 08:11:30.416 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 08:11:30.417 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 08:11:30.435 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10ms. Found 0 Redis repository interfaces.
2025-06-06 08:11:30.776 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 08:11:30.781 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 08:11:30.782 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 08:11:30.782 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 08:11:30.864 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 08:11:30.864 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 923 ms
2025-06-06 08:11:31.390 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 08:11:31.591 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 08:11:31.630 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 08:11:31.657 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#77db3d02:0/SimpleConnection@432c0f1 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 57774]
2025-06-06 08:11:31.698 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 08:11:31.710 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 08:11:31.712 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.122 seconds (JVM running for 2.38)
2025-06-06 09:52:47.522 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 766966 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 09:52:47.524 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 09:52:47.524 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 09:52:48.061 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 09:52:48.063 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 09:52:48.089 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13ms. Found 0 Redis repository interfaces.
2025-06-06 09:52:48.422 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 09:52:48.429 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 09:52:48.429 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 09:52:48.429 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 09:52:48.493 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 09:52:48.494 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 930 ms
2025-06-06 09:52:49.064 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 09:52:49.303 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 09:52:49.342 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 09:52:49.374 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#a146b11:0/SimpleConnection@41938e1e [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 39054]
2025-06-06 09:52:49.428 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 09:52:49.434 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 09:52:49.435 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-06 09:52:49.442 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [lettuce-eventExecutorLoop-1-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1802)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 io.netty.util.concurrent.SingleThreadEventExecutor.takeTask(SingleThreadEventExecutor.java:289)
 io.netty.util.concurrent.DefaultEventExecutor.run(DefaultEventExecutor.java:64)
 io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1050)
 io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
 io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 09:52:49.444 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 09:52:49.444 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 09:52:49.446 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-06-06 09:52:49.448 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8050 was already in use.

Action:

Identify and stop the process that's listening on port 8050 or configure this application to listen on another port.

2025-06-06 09:52:49.453 [main] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 09:52:50.420 [main] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 09:52:50.425 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 10:01:39.569 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 10:01:39.570 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 10:01:39.574 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-06 14:33:33.426 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:33:33.570 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:33:33.697 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 14:34:31.811 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 786288 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 14:34:31.813 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 14:34:31.813 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 14:34:32.295 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 14:34:32.297 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 14:34:32.318 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12ms. Found 0 Redis repository interfaces.
2025-06-06 14:34:32.640 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 14:34:32.646 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:34:32.646 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 14:34:32.646 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 14:34:32.723 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 14:34:32.723 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 880 ms
2025-06-06 14:34:33.274 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 14:34:33.500 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 14:34:33.539 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 14:34:33.574 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#1b01a0d:0/SimpleConnection@1f0e2bdc [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 34524]
2025-06-06 14:34:33.622 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:34:33.634 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 14:34:33.636 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.109 seconds (JVM running for 2.383)
2025-06-06 14:34:37.356 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:34:37.619 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:34:37.625 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 14:37:04.746 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 786582 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 14:37:04.747 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 14:37:04.748 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 14:37:05.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 14:37:05.209 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 14:37:05.231 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14ms. Found 0 Redis repository interfaces.
2025-06-06 14:37:05.550 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 14:37:05.556 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:37:05.557 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 14:37:05.557 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 14:37:05.617 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 14:37:05.617 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 833 ms
2025-06-06 14:37:06.128 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 14:37:06.326 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 14:37:06.361 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 14:37:06.389 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#388623ad:0/SimpleConnection@525b8922 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 56950]
2025-06-06 14:37:06.433 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:37:06.445 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 14:37:06.447 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.023 seconds (JVM running for 2.252)
2025-06-06 14:37:12.105 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:37:12.429 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:37:12.434 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 14:43:44.339 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 787155 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 14:43:44.340 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 14:43:44.341 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 14:43:44.815 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 14:43:44.817 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 14:43:44.837 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12ms. Found 0 Redis repository interfaces.
2025-06-06 14:43:45.161 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 14:43:45.167 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:43:45.167 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 14:43:45.168 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 14:43:45.228 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 14:43:45.228 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 858 ms
2025-06-06 14:43:45.790 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 14:43:45.987 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 14:43:46.024 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 14:43:46.052 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#3d9f5016:0/SimpleConnection@28f05b0c [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 56492]
2025-06-06 14:43:46.100 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:43:46.111 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 14:43:46.113 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.053 seconds (JVM running for 2.26)
2025-06-06 14:43:56.476 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:43:57.097 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:43:57.103 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 14:53:11.724 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 787815 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 14:53:11.725 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 14:53:11.726 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 14:53:12.204 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 14:53:12.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 14:53:12.224 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11ms. Found 0 Redis repository interfaces.
2025-06-06 14:53:12.574 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 14:53:12.580 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:53:12.581 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 14:53:12.581 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 14:53:12.660 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 14:53:12.661 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 907 ms
2025-06-06 14:53:13.206 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 14:53:13.394 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 14:53:13.430 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 14:53:13.459 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#75fd65c:0/SimpleConnection@7019d619 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 36352]
2025-06-06 14:53:13.511 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:53:13.523 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 14:53:13.525 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.108 seconds (JVM running for 2.327)
2025-06-06 14:53:27.909 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:53:28.508 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:53:28.514 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 14:54:12.636 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 788250 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 14:54:12.637 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 14:54:12.638 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 14:54:13.172 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 14:54:13.173 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 14:54:13.192 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11ms. Found 0 Redis repository interfaces.
2025-06-06 14:54:13.511 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 14:54:13.518 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:54:13.519 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 14:54:13.519 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 14:54:13.581 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 14:54:13.581 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 912 ms
2025-06-06 14:54:14.134 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 14:54:14.336 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 14:54:14.373 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 14:54:14.413 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#3610f277:0/SimpleConnection@6caeba36 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 44276]
2025-06-06 14:54:14.467 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 14:54:14.479 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 14:54:14.481 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.131 seconds (JVM running for 2.365)
2025-06-06 14:56:26.121 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 14:56:26.122 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 14:56:26.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 14:56:26.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 14:57:08.557 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 14:57:09.136 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 14:57:09.143 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 15:05:17.846 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 789284 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 15:05:17.848 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 15:05:17.848 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 15:05:18.455 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 15:05:18.456 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 15:05:18.479 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13ms. Found 0 Redis repository interfaces.
2025-06-06 15:05:18.918 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 15:05:18.928 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:05:18.929 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 15:05:18.929 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 15:05:19.041 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 15:05:19.041 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1154 ms
2025-06-06 15:05:19.740 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 15:05:20.042 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 15:05:20.101 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 15:05:20.148 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#3d9f5016:0/SimpleConnection@75d97e18 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 42486]
2025-06-06 15:05:20.220 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:05:20.240 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 15:05:20.244 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.719 seconds (JVM running for 2.993)
2025-06-06 15:05:56.422 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 15:05:56.422 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 15:05:56.426 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-06 15:06:42.243 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 15:06:42.245 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 15:06:42.245 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 15:06:42.245 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 15:07:42.842 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 15:07:42.894 [http-nio-0.0.0.0-8050-exec-3] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 15:07:42.894 [http-nio-0.0.0.0-8050-exec-3] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 15:07:42.994 [http-nio-0.0.0.0-8050-exec-3] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 15:07:42.994 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 15:07:42.995 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 15:07:44.347 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 15:07:44.351 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 15:08:13.962 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 15:08:13.963 [http-nio-0.0.0.0-8050-exec-7] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 15:08:13.964 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 15:08:14.700 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 15:08:14.701 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 15:16:48.382 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 15:16:48.383 [http-nio-0.0.0.0-8050-exec-9] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 15:16:48.384 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 15:16:49.114 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 15:16:54.232 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 15:16:54.234 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 15:16:54.235 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 15:16:54.236 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 15:16:54.236 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 15:16:54.236 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 15:16:54.240 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 15:16:54.241 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 15:16:54.242 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 15:16:54.242 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 15:16:54.243 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 15:16:54.962 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 15:17:00.360 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 323232
2025-06-06 15:17:00.362 [http-nio-0.0.0.0-8050-exec-7] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 15:17:00.366 [http-nio-0.0.0.0-8050-exec-7] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:249)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 15:17:13.510 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 15:17:14.326 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 15:17:14.332 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 15:19:04.792 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 790537 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 15:19:04.793 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 15:19:04.793 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 15:19:05.353 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 15:19:05.355 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 15:19:05.377 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11ms. Found 0 Redis repository interfaces.
2025-06-06 15:19:05.715 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 15:19:05.723 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:19:05.723 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 15:19:05.723 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 15:19:05.792 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 15:19:05.792 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 968 ms
2025-06-06 15:19:06.343 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 15:19:06.560 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 15:19:06.598 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 15:19:06.626 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#1e84f3c8:0/SimpleConnection@2bdcfcf [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 33326]
2025-06-06 15:19:06.670 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:19:06.682 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 15:19:06.684 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.216 seconds (JVM running for 2.488)
2025-06-06 15:19:20.849 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 15:19:20.850 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 15:19:20.850 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"https://api.chequeodni.com","method":"POST"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 15:19:20.850 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 15:19:38.610 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 15:19:38.610 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 15:19:38.613 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-06 15:19:38.646 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: mensaje uno
2025-06-06 15:19:38.710 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 15:19:38.710 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 15:19:38.805 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 15:19:38.806 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 15:19:38.806 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 15:19:39.823 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 15:19:39.827 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 15:23:28.103 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 15:23:28.888 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 15:23:28.894 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 15:33:25.063 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 791614 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 15:33:25.064 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 15:33:25.064 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 15:33:25.575 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 15:33:25.577 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 15:33:25.594 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10ms. Found 0 Redis repository interfaces.
2025-06-06 15:33:25.899 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 15:33:25.905 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:33:25.906 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 15:33:25.906 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 15:33:25.965 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 15:33:25.965 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 872 ms
2025-06-06 15:33:26.496 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 15:33:26.696 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 15:33:26.730 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 15:33:26.758 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#3850e90c:0/SimpleConnection@6d3163a6 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 37278]
2025-06-06 15:33:26.803 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:33:26.816 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 15:33:26.818 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.042 seconds (JVM running for 2.253)
2025-06-06 15:33:32.764 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 15:33:32.799 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 15:33:32.803 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 15:59:28.401 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 794148 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 15:59:28.403 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 15:59:28.403 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 15:59:29.072 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 15:59:29.073 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 15:59:29.098 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15ms. Found 0 Redis repository interfaces.
2025-06-06 15:59:29.627 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 15:59:29.639 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:59:29.639 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 15:59:29.640 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 15:59:29.751 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 15:59:29.751 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1313 ms
2025-06-06 15:59:30.591 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 15:59:30.930 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 15:59:30.982 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 15:59:31.026 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#3610f277:0/SimpleConnection@674aa626 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 47704]
2025-06-06 15:59:31.096 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 15:59:31.115 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 15:59:31.118 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 3.108 seconds (JVM running for 3.441)
2025-06-06 16:02:38.669 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 16:02:38.670 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 16:02:38.671 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 16:02:38.671 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 16:03:22.783 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 16:03:22.783 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 16:03:22.788 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-06 16:03:22.825 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: hola
2025-06-06 16:03:22.881 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 16:03:22.881 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 16:03:22.991 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 16:03:22.992 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 16:03:22.992 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 16:03:24.063 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 16:03:24.067 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 16:03:24.067 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 16:03:24.068 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 16:03:24.795 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 16:03:24.796 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 16:03:24.796 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 16:03:24.797 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 16:03:25.789 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 16:03:28.982 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 16:03:28.983 [http-nio-0.0.0.0-8050-exec-3] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 16:03:28.985 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 16:03:28.985 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 16:03:28.985 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 16:03:28.985 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 16:03:28.988 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 16:03:28.989 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 16:03:28.989 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 16:03:28.990 [http-nio-0.0.0.0-8050-exec-3] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 16:03:28.990 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 16:03:29.653 [http-nio-0.0.0.0-8050-exec-3] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 16:03:35.112 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 222222222
2025-06-06 16:03:35.113 [http-nio-0.0.0.0-8050-exec-6] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 16:03:35.116 [http-nio-0.0.0.0-8050-exec-6] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:253)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 17:44:43.913 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 17:44:44.213 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 17:44:44.220 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 17:49:54.787 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 800611 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 17:49:54.789 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 17:49:54.789 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 17:49:55.375 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 17:49:55.377 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 17:49:55.400 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14ms. Found 0 Redis repository interfaces.
2025-06-06 17:49:55.785 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 17:49:55.792 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 17:49:55.792 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 17:49:55.792 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 17:49:55.861 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 17:49:55.862 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1043 ms
2025-06-06 17:49:56.460 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 17:49:56.678 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 17:49:56.714 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 17:49:56.744 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#75fd65c:0/SimpleConnection@7019d619 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 44326]
2025-06-06 17:49:56.789 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 17:49:56.803 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 17:49:56.805 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.371 seconds (JVM running for 2.629)
2025-06-06 17:50:24.830 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 17:50:24.830 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 17:50:24.831 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 17:50:24.831 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 17:51:14.437 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 17:51:14.437 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 17:51:14.442 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-06-06 17:51:14.485 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: hola
2025-06-06 17:51:14.542 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 17:51:14.542 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 17:51:14.621 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 17:51:14.621 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 17:51:14.622 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 17:51:15.201 [http-nio-0.0.0.0-8050-exec-1] ERROR c.b.o.controller.WebhookController - Error en WebhookController: 401 Unauthorized: [no body]
org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 Unauthorized: [no body]
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:105)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:112)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:785)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:743)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:677)
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:452)
	at coop.bancocredicoop.omnited.service.whatsapp.WhatsappService.sendTextMessage(WhatsappService.java:52)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoOut(DiagramaMapper.java:92)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:63)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 17:51:35.361 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 17:51:35.845 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 17:51:35.852 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 17:52:44.048 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 800974 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 17:52:44.050 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 17:52:44.050 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 17:52:44.592 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 17:52:44.594 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 17:52:44.613 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11ms. Found 0 Redis repository interfaces.
2025-06-06 17:52:44.939 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 17:52:44.946 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 17:52:44.947 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 17:52:44.947 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 17:52:45.019 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 17:52:45.020 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 938 ms
2025-06-06 17:52:45.624 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 17:52:45.821 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 17:52:45.856 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 17:52:45.883 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#399ca607:0/SimpleConnection@2d9de284 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 40716]
2025-06-06 17:52:45.931 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 17:52:45.946 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 17:52:45.948 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.195 seconds (JVM running for 2.512)
2025-06-06 17:53:36.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 17:53:36.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 17:53:36.619 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 17:53:36.619 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 17:53:52.155 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 17:53:52.156 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 17:53:52.160 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-06 17:53:52.191 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: hola
2025-06-06 17:53:52.246 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 17:53:52.246 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 17:53:52.352 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 17:53:52.353 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 17:53:52.353 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 17:53:53.494 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 17:53:53.499 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 17:53:53.499 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 17:53:53.499 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 17:53:54.105 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 17:53:54.106 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 17:53:54.107 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 17:53:54.107 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 17:53:54.817 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 17:53:57.925 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 17:53:57.927 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 17:53:57.928 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 17:53:57.929 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 17:53:57.930 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 17:53:57.930 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 17:53:57.934 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 17:53:57.935 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 17:53:57.935 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 17:53:57.936 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 17:53:57.936 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 17:53:57.936 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 17:53:58.622 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 17:54:04.129 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 33333
2025-06-06 17:54:04.130 [http-nio-0.0.0.0-8050-exec-9] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 17:54:04.130 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 17:54:04.134 [http-nio-0.0.0.0-8050-exec-9] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:255)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 18:13:04.158 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 18:13:04.159 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:13:04.159 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:13:04.159 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 18:15:12.156 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: hola
2025-06-06 18:15:12.157 [http-nio-0.0.0.0-8050-exec-8] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 18:15:12.157 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 18:15:12.157 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 18:15:13.166 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:15:13.169 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 18:15:13.170 [http-nio-0.0.0.0-8050-exec-8] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:15:13.170 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 18:15:13.825 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:15:13.827 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 18:15:13.827 [http-nio-0.0.0.0-8050-exec-8] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:15:13.828 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 18:15:14.545 [http-nio-0.0.0.0-8050-exec-8] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 18:15:16.900 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 18:15:16.902 [http-nio-0.0.0.0-8050-exec-4] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:15:16.903 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 18:15:16.904 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 18:15:16.904 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 18:15:16.904 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:15:16.905 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 18:15:16.906 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 18:15:16.906 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 18:15:16.906 [http-nio-0.0.0.0-8050-exec-4] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:15:16.906 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:15:16.907 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 18:15:17.543 [http-nio-0.0.0.0-8050-exec-4] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 18:15:21.165 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: aaa
2025-06-06 18:15:21.166 [http-nio-0.0.0.0-8050-exec-9] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:15:21.166 [http-nio-0.0.0.0-8050-exec-9] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:15:21.168 [http-nio-0.0.0.0-8050-exec-9] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:255)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 18:30:33.259 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 18:30:33.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:30:33.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:30:33.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 18:30:45.250 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: hola
2025-06-06 18:30:45.251 [http-nio-0.0.0.0-8050-exec-10] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 18:30:45.251 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 18:30:45.251 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 18:30:46.054 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:30:46.055 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 18:30:46.055 [http-nio-0.0.0.0-8050-exec-10] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:30:46.056 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 18:30:47.036 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:30:47.037 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 18:30:47.038 [http-nio-0.0.0.0-8050-exec-10] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:30:47.038 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 18:30:47.652 [http-nio-0.0.0.0-8050-exec-10] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 18:30:50.225 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 2
2025-06-06 18:30:50.226 [http-nio-0.0.0.0-8050-exec-6] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:30:50.228 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 18:30:50.228 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:Legajo value=2 TTL=1800s
2025-06-06 18:30:50.228 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> Legajo = '2'
2025-06-06 18:30:50.228 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f2d1f66e-d0f2-4051-8a6a-95bb5e889207
2025-06-06 18:30:50.229 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 18:30:50.229 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 18:30:50.229 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f2d1f66e-d0f2-4051-8a6a-95bb5e889207 TTL=1800s
2025-06-06 18:30:50.230 [http-nio-0.0.0.0-8050-exec-6] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f2d1f66e-d0f2-4051-8a6a-95bb5e889207
2025-06-06 18:30:50.230 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:30:50.230 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su legajo sin caracteres especiales.
2025-06-06 18:30:51.017 [http-nio-0.0.0.0-8050-exec-6] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:Legajo value=true TTL=1800s
2025-06-06 18:30:55.503 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: sasasa
2025-06-06 18:30:55.505 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f2d1f66e-d0f2-4051-8a6a-95bb5e889207
2025-06-06 18:30:55.505 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:30:55.506 [http-nio-0.0.0.0-8050-exec-1] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:255)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 18:37:19.814 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 18:37:20.301 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 18:37:20.309 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 18:42:28.316 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 804841 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 18:42:28.317 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 18:42:28.318 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 18:42:28.922 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 18:42:28.925 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 18:42:28.965 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27ms. Found 0 Redis repository interfaces.
2025-06-06 18:42:29.407 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 18:42:29.414 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 18:42:29.414 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 18:42:29.414 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 18:42:29.499 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 18:42:29.499 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1151 ms
2025-06-06 18:42:30.150 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 18:42:30.379 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 18:42:30.413 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 18:42:30.444 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#168b4cb0:0/SimpleConnection@33215ffb [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 58742]
2025-06-06 18:42:30.494 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 18:42:30.510 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 18:42:30.512 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.53 seconds (JVM running for 2.79)
2025-06-06 18:42:47.926 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 18:42:47.926 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:42:47.927 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria.
2025-06-06 18:42:47.927 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo e84d6c64-57e9-4fd7-9afe-0959eef09d0e (type=out):
    └─ (sin handle) → 0f513150-f67e-4acd-b4a3-87c64563099e

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 0f513150-f67e-4acd-b4a3-87c64563099e (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 6bfb98c3-66da-4ba0-aa81-ba150cf43c15 (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo c5b02e75-4828-454e-9e46-7bc40185bd6b (type=in):
    └─ sourceHandle=error → 6bfb98c3-66da-4ba0-aa81-ba150cf43c15
    └─ sourceHandle=ok → f17ef2fc-5d0a-439e-81c3-f3916398d2c7
    └─ sourceHandle=ok → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 713e0bd3-6f95-4415-8425-f029d0bfe74a (type=out):
    └─ (sin handle) → f17ef2fc-5d0a-439e-81c3-f3916398d2c7

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 4f22c7b5-ee00-479d-a24d-f7c70a17ada7 (type=drv):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f17ef2fc-5d0a-439e-81c3-f3916398d2c7 (type=inVar):
    └─ (sin handle) → 36624594-8502-4026-b5ce-927fa280e552

2025-06-06 18:42:47.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f2d1f66e-d0f2-4051-8a6a-95bb5e889207 (type=inVar):
    └─ (sin handle) → 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 81fab6c7-e7b7-461f-ac18-724e9c2006db (type=out):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo a385ff63-f18e-4126-9a75-b3486f7b2765 (type=out):
    └─ (sin handle) → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 36624594-8502-4026-b5ce-927fa280e552 (type=svc):
    └─ (sin handle) → 8d935e74-3b6d-47ac-979d-8daf9e36ef12

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8d935e74-3b6d-47ac-979d-8daf9e36ef12 (type=cond):
    └─ sourceHandle=false → 713e0bd3-6f95-4415-8425-f029d0bfe74a
    └─ sourceHandle=true → 4f22c7b5-ee00-479d-a24d-f7c70a17ada7

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6 (type=svc):
    └─ (sin handle) → b6138429-cde0-4452-bcf6-8ea8815b909e

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo b6138429-cde0-4452-bcf6-8ea8815b909e (type=cond):
    └─ sourceHandle=false → a385ff63-f18e-4126-9a75-b3486f7b2765
    └─ sourceHandle=true → 81fab6c7-e7b7-461f-ac18-724e9c2006db

2025-06-06 18:42:47.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 18:46:33.111 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 18:46:33.969 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 18:46:33.976 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 18:50:15.396 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 805373 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 18:50:15.398 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 18:50:15.398 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 18:50:15.904 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 18:50:15.906 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 18:50:15.925 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10ms. Found 0 Redis repository interfaces.
2025-06-06 18:50:16.276 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 18:50:16.283 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 18:50:16.283 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 18:50:16.283 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 18:50:16.349 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 18:50:16.349 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 923 ms
2025-06-06 18:50:16.925 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 18:50:17.142 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 18:50:17.178 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 18:50:17.211 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#6ec63f8:0/SimpleConnection@b70fa38 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 55150]
2025-06-06 18:50:17.255 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 18:50:17.267 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 18:50:17.268 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.165 seconds (JVM running for 2.4)
2025-06-06 18:50:29.916 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 18:50:29.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 18:50:29.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria.
2025-06-06 18:50:29.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo e84d6c64-57e9-4fd7-9afe-0959eef09d0e (type=out):
    └─ (sin handle) → 0f513150-f67e-4acd-b4a3-87c64563099e

2025-06-06 18:50:29.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 0f513150-f67e-4acd-b4a3-87c64563099e (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 18:50:29.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 6bfb98c3-66da-4ba0-aa81-ba150cf43c15 (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo c5b02e75-4828-454e-9e46-7bc40185bd6b (type=in):
    └─ sourceHandle=error → 6bfb98c3-66da-4ba0-aa81-ba150cf43c15
    └─ sourceHandle=ok → f17ef2fc-5d0a-439e-81c3-f3916398d2c7
    └─ sourceHandle=ok → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 713e0bd3-6f95-4415-8425-f029d0bfe74a (type=out):
    └─ (sin handle) → f17ef2fc-5d0a-439e-81c3-f3916398d2c7

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 4f22c7b5-ee00-479d-a24d-f7c70a17ada7 (type=drv):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f17ef2fc-5d0a-439e-81c3-f3916398d2c7 (type=inVar):
    └─ (sin handle) → 36624594-8502-4026-b5ce-927fa280e552

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f2d1f66e-d0f2-4051-8a6a-95bb5e889207 (type=inVar):
    └─ (sin handle) → 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 81fab6c7-e7b7-461f-ac18-724e9c2006db (type=out):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 18:50:29.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo a385ff63-f18e-4126-9a75-b3486f7b2765 (type=out):
    └─ (sin handle) → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 18:50:29.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 36624594-8502-4026-b5ce-927fa280e552 (type=svc):
    └─ (sin handle) → 8d935e74-3b6d-47ac-979d-8daf9e36ef12

2025-06-06 18:50:29.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8d935e74-3b6d-47ac-979d-8daf9e36ef12 (type=cond):
    └─ sourceHandle=false → 713e0bd3-6f95-4415-8425-f029d0bfe74a
    └─ sourceHandle=true → 4f22c7b5-ee00-479d-a24d-f7c70a17ada7

2025-06-06 18:50:29.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6 (type=svc):
    └─ (sin handle) → b6138429-cde0-4452-bcf6-8ea8815b909e

2025-06-06 18:50:29.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo b6138429-cde0-4452-bcf6-8ea8815b909e (type=cond):
    └─ sourceHandle=false → a385ff63-f18e-4126-9a75-b3486f7b2765
    └─ sourceHandle=true → 81fab6c7-e7b7-461f-ac18-724e9c2006db

2025-06-06 18:50:29.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 18:50:41.028 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 18:50:41.028 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 18:50:41.031 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-06 18:50:41.063 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 18:50:41.121 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 18:50:41.121 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 18:50:41.189 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 18:50:41.189 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 18:50:41.189 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:41.189 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 18:50:41.189 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:41.190 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 18:50:42.416 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:50:42.420 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 18:50:42.420 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 18:50:42.420 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:42.420 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 18:50:42.420 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:42.421 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 18:50:43.129 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:50:43.130 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 18:50:43.131 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:50:43.131 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:43.131 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 18:50:43.131 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:43.131 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 18:50:43.791 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 18:50:46.355 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 18:50:46.357 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 18:50:46.357 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:46.357 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 18:50:46.357 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:46.358 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 18:50:46.358 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 18:50:46.358 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 18:50:46.359 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:50:46.360 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 18:50:46.361 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 18:50:46.361 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 18:50:46.362 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:50:46.362 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:46.362 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:50:46.362 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:46.362 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 18:50:47.134 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 18:50:50.093 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 18:50:50.094 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 18:50:50.095 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:50.095 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 18:50:50.095 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 18:50:50.097 [http-nio-0.0.0.0-8050-exec-5] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:266)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 19:16:09.809 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 19:16:10.095 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 19:16:10.104 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 19:16:16.180 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 807040 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 19:16:16.181 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 19:16:16.182 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 19:16:16.672 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 19:16:16.673 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 19:16:16.694 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12ms. Found 0 Redis repository interfaces.
2025-06-06 19:16:17.036 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 19:16:17.043 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:16:17.043 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 19:16:17.043 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 19:16:17.109 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 19:16:17.109 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 896 ms
2025-06-06 19:16:17.626 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 19:16:17.834 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 19:16:17.869 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 19:16:17.898 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#7e91ed74:0/SimpleConnection@5fdb7394 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 44546]
2025-06-06 19:16:17.944 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:16:17.956 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 19:16:17.958 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.077 seconds (JVM running for 2.295)
2025-06-06 19:16:32.887 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 19:16:32.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 19:16:32.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria.
2025-06-06 19:16:32.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo e84d6c64-57e9-4fd7-9afe-0959eef09d0e (type=out):
    └─ (sin handle) → 0f513150-f67e-4acd-b4a3-87c64563099e

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 0f513150-f67e-4acd-b4a3-87c64563099e (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 6bfb98c3-66da-4ba0-aa81-ba150cf43c15 (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo c5b02e75-4828-454e-9e46-7bc40185bd6b (type=in):
    └─ sourceHandle=error → 6bfb98c3-66da-4ba0-aa81-ba150cf43c15
    └─ sourceHandle=ok → f17ef2fc-5d0a-439e-81c3-f3916398d2c7
    └─ sourceHandle=ok → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 713e0bd3-6f95-4415-8425-f029d0bfe74a (type=out):
    └─ (sin handle) → f17ef2fc-5d0a-439e-81c3-f3916398d2c7

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 4f22c7b5-ee00-479d-a24d-f7c70a17ada7 (type=drv):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f17ef2fc-5d0a-439e-81c3-f3916398d2c7 (type=inVar):
    └─ (sin handle) → 36624594-8502-4026-b5ce-927fa280e552

2025-06-06 19:16:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f2d1f66e-d0f2-4051-8a6a-95bb5e889207 (type=inVar):
    └─ (sin handle) → 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 81fab6c7-e7b7-461f-ac18-724e9c2006db (type=out):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo a385ff63-f18e-4126-9a75-b3486f7b2765 (type=out):
    └─ (sin handle) → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 36624594-8502-4026-b5ce-927fa280e552 (type=svc):
    └─ (sin handle) → 8d935e74-3b6d-47ac-979d-8daf9e36ef12

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8d935e74-3b6d-47ac-979d-8daf9e36ef12 (type=cond):
    └─ sourceHandle=false → 713e0bd3-6f95-4415-8425-f029d0bfe74a
    └─ sourceHandle=true → 4f22c7b5-ee00-479d-a24d-f7c70a17ada7

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6 (type=svc):
    └─ (sin handle) → b6138429-cde0-4452-bcf6-8ea8815b909e

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo b6138429-cde0-4452-bcf6-8ea8815b909e (type=cond):
    └─ sourceHandle=false → a385ff63-f18e-4126-9a75-b3486f7b2765
    └─ sourceHandle=true → 81fab6c7-e7b7-461f-ac18-724e9c2006db

2025-06-06 19:16:32.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 19:16:43.984 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 19:16:43.984 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 19:16:43.987 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-06 19:16:44.020 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: a
2025-06-06 19:16:44.077 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 19:16:44.078 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 19:16:44.149 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 19:16:44.149 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 19:16:44.150 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:16:44.150 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:16:44.150 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:16:44.150 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 19:16:44.639 [http-nio-0.0.0.0-8050-exec-1] ERROR c.b.o.controller.WebhookController - Error en WebhookController: 401 Unauthorized: [no body]
org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 Unauthorized: [no body]
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:105)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:112)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:785)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:743)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:677)
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:452)
	at coop.bancocredicoop.omnited.service.whatsapp.WhatsappService.sendTextMessage(WhatsappService.java:52)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoOut(DiagramaMapper.java:96)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:63)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 19:16:57.093 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 19:16:57.899 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 19:16:57.905 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 19:17:59.538 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 807331 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 19:17:59.539 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 19:17:59.540 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 19:18:00.018 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 19:18:00.019 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 19:18:00.040 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12ms. Found 0 Redis repository interfaces.
2025-06-06 19:18:00.369 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 19:18:00.376 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:18:00.377 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 19:18:00.377 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 19:18:00.445 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 19:18:00.446 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 877 ms
2025-06-06 19:18:00.967 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 19:18:01.161 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 19:18:01.197 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 19:18:01.223 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#a6c54c3:0/SimpleConnection@55e91e61 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 39802]
2025-06-06 19:18:01.265 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:18:01.276 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 19:18:01.278 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 2.021 seconds (JVM running for 2.278)
2025-06-06 19:18:15.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 19:18:15.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 19:18:15.008 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria.
2025-06-06 19:18:15.008 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo e84d6c64-57e9-4fd7-9afe-0959eef09d0e (type=out):
    └─ (sin handle) → 0f513150-f67e-4acd-b4a3-87c64563099e

2025-06-06 19:18:15.008 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 0f513150-f67e-4acd-b4a3-87c64563099e (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 6bfb98c3-66da-4ba0-aa81-ba150cf43c15 (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo c5b02e75-4828-454e-9e46-7bc40185bd6b (type=in):
    └─ sourceHandle=error → 6bfb98c3-66da-4ba0-aa81-ba150cf43c15
    └─ sourceHandle=ok → f17ef2fc-5d0a-439e-81c3-f3916398d2c7
    └─ sourceHandle=ok → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 713e0bd3-6f95-4415-8425-f029d0bfe74a (type=out):
    └─ (sin handle) → f17ef2fc-5d0a-439e-81c3-f3916398d2c7

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 4f22c7b5-ee00-479d-a24d-f7c70a17ada7 (type=drv):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f17ef2fc-5d0a-439e-81c3-f3916398d2c7 (type=inVar):
    └─ (sin handle) → 36624594-8502-4026-b5ce-927fa280e552

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f2d1f66e-d0f2-4051-8a6a-95bb5e889207 (type=inVar):
    └─ (sin handle) → 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6

2025-06-06 19:18:15.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 81fab6c7-e7b7-461f-ac18-724e9c2006db (type=out):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo a385ff63-f18e-4126-9a75-b3486f7b2765 (type=out):
    └─ (sin handle) → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 36624594-8502-4026-b5ce-927fa280e552 (type=svc):
    └─ (sin handle) → 8d935e74-3b6d-47ac-979d-8daf9e36ef12

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8d935e74-3b6d-47ac-979d-8daf9e36ef12 (type=cond):
    └─ sourceHandle=false → 713e0bd3-6f95-4415-8425-f029d0bfe74a
    └─ sourceHandle=true → 4f22c7b5-ee00-479d-a24d-f7c70a17ada7

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6 (type=svc):
    └─ (sin handle) → b6138429-cde0-4452-bcf6-8ea8815b909e

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo b6138429-cde0-4452-bcf6-8ea8815b909e (type=cond):
    └─ sourceHandle=false → a385ff63-f18e-4126-9a75-b3486f7b2765
    └─ sourceHandle=true → 81fab6c7-e7b7-461f-ac18-724e9c2006db

2025-06-06 19:18:15.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 19:18:24.837 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 19:18:24.837 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 19:18:24.840 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-06 19:18:24.868 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: f
2025-06-06 19:18:24.928 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 19:18:24.928 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:25.048 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 19:18:26.240 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 19:18:26.245 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 19:18:26.245 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 19:18:26.245 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:26.245 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:18:26.245 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:26.246 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 19:18:26.952 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:18:26.953 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 19:18:26.953 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:18:26.953 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:26.953 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 19:18:26.953 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:26.954 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 19:18:27.772 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 19:18:30.640 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 19:18:30.641 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:18:30.641 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:30.641 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 19:18:30.641 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:30.643 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 19:18:30.643 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 19:18:30.643 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 19:18:30.643 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:18:30.645 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 19:18:30.646 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 19:18:30.646 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 19:18:30.647 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:18:30.647 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:30.647 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 19:18:30.647 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:30.648 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 19:18:31.429 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 19:18:36.381 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 12
2025-06-06 19:18:36.382 [http-nio-0.0.0.0-8050-exec-7] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:18:36.382 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:36.382 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 19:18:36.382 [http-nio-0.0.0.0-8050-exec-7] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:18:36.384 [http-nio-0.0.0.0-8050-exec-7] ERROR c.b.o.controller.WebhookController - Error en WebhookController: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
java.lang.NullPointerException: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.asText()" because the return value of "com.fasterxml.jackson.databind.JsonNode.get(String)" is null
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:275)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-06-06 19:18:58.394 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 19:18:59.022 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 19:18:59.028 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2025-06-06 19:33:41.122 [main] INFO  c.b.omnited.BasicApplication - Starting BasicApplication on BCCL104333LX with PID 808346 (/home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector/target/classes started by mgiannini in /home/mgiannini/NetBeansProjects/omnited/backend/omnited-wa-conector)
2025-06-06 19:33:41.124 [main] DEBUG c.b.omnited.BasicApplication - Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2025-06-06 19:33:41.124 [main] INFO  c.b.omnited.BasicApplication - No active profile set, falling back to default profiles: default
2025-06-06 19:33:41.601 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-06-06 19:33:41.603 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 19:33:41.620 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10ms. Found 0 Redis repository interfaces.
2025-06-06 19:33:41.929 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8050 (http)
2025-06-06 19:33:41.935 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:33:41.936 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 19:33:41.936 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.29]
2025-06-06 19:33:41.998 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 19:33:41.999 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 847 ms
2025-06-06 19:33:42.497 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2025-06-06 19:33:42.688 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-06 19:33:42.724 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: 127.0.0.1:5672
2025-06-06 19:33:42.750 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: connectionFactory#4cfa83f9:0/SimpleConnection@4b5798c2 [delegate=amqp://user_db@127.0.0.1:5672/, localPort= 60288]
2025-06-06 19:33:42.791 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8050"]
2025-06-06 19:33:42.803 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8050 (http) with context path ''
2025-06-06 19:33:42.805 [main] INFO  c.b.omnited.BasicApplication - Started BasicApplication in 1.97 seconds (JVM running for 2.192)
2025-06-06 19:33:55.354 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Se recibió diagrama para botId=28
2025-06-06 19:33:55.354 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] DEBUG c.b.o.message.BotWhatsAppHandler - Diagrama limpio: {"nodes":[{"id":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","type":"out","data":{"text":"Bienvenido al Bot"}},{"id":"0f513150-f67e-4acd-b4a3-87c64563099e","type":"out","data":{"text":"Ingrese una de las opciones con la cual quiere identificarse."}},{"id":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","type":"out","data":{"text":"Ingrese una de las opciones. Solo indique el número."}},{"id":"c5b02e75-4828-454e-9e46-7bc40185bd6b","type":"in","data":{"mode":"Opciones","dtype":"Integer","optionsList":[{"id":1,"text":"DNI"},{"id":2,"text":"Legajo"}],"selectedVars":["DNI","Legajo"],"numeroIntentos":4}},{"id":"713e0bd3-6f95-4415-8425-f029d0bfe74a","type":"out","data":{"text":"Su DNI no existe. Intente nuevamente."}},{"id":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","type":"drv","data":{"primary":3,"secondary":4}},{"id":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","type":"inVar","data":{"selectedVar":"DNI","text":"Ingrese su DNI sin puntos","numeroIntentos":2}},{"id":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","type":"inVar","data":{"selectedVar":"Legajo","text":"Ingrese su legajo sin caracteres especiales.","numeroIntentos":3}},{"id":"81fab6c7-e7b7-461f-ac18-724e9c2006db","type":"out","data":{"text":"El legajo es correcto."}},{"id":"a385ff63-f18e-4126-9a75-b3486f7b2765","type":"out","data":{"text":"Su legajo no existe."}},{"id":"36624594-8502-4026-b5ce-927fa280e552","type":"svc","data":{"url":"http://localhost:8044/dni-chequeo","method":"GET"}},{"id":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","type":"cond","data":{}},{"id":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","type":"svc","data":{"url":"https://api.chequeolegajo.com","method":"POST"}},{"id":"b6138429-cde0-4452-bcf6-8ea8815b909e","type":"cond","data":{}}],"edges":[{"source":"e84d6c64-57e9-4fd7-9afe-0959eef09d0e","target":"0f513150-f67e-4acd-b4a3-87c64563099e","id":"xy-edge__e84d6c64-57e9-4fd7-9afe-0959eef09d0e-0f513150-f67e-4acd-b4a3-87c64563099e"},{"source":"0f513150-f67e-4acd-b4a3-87c64563099e","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__0f513150-f67e-4acd-b4a3-87c64563099e-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"error","target":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6berror-6bfb98c3-66da-4ba0-aa81-ba150cf43c15"},{"source":"6bfb98c3-66da-4ba0-aa81-ba150cf43c15","target":"c5b02e75-4828-454e-9e46-7bc40185bd6b","id":"xy-edge__6bfb98c3-66da-4ba0-aa81-ba150cf43c15-c5b02e75-4828-454e-9e46-7bc40185bd6b"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"c5b02e75-4828-454e-9e46-7bc40185bd6b","sourceHandle":"ok","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__c5b02e75-4828-454e-9e46-7bc40185bd6bok-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"713e0bd3-6f95-4415-8425-f029d0bfe74a","target":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","id":"xy-edge__713e0bd3-6f95-4415-8425-f029d0bfe74a-f17ef2fc-5d0a-439e-81c3-f3916398d2c7"},{"source":"a385ff63-f18e-4126-9a75-b3486f7b2765","target":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","id":"xy-edge__a385ff63-f18e-4126-9a75-b3486f7b2765-f2d1f66e-d0f2-4051-8a6a-95bb5e889207"},{"source":"f17ef2fc-5d0a-439e-81c3-f3916398d2c7","target":"36624594-8502-4026-b5ce-927fa280e552","id":"xy-edge__f17ef2fc-5d0a-439e-81c3-f3916398d2c7-36624594-8502-4026-b5ce-927fa280e552"},{"source":"36624594-8502-4026-b5ce-927fa280e552","target":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","id":"xy-edge__36624594-8502-4026-b5ce-927fa280e552-8d935e74-3b6d-47ac-979d-8daf9e36ef12"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"false","target":"713e0bd3-6f95-4415-8425-f029d0bfe74a","label":"NO","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12false-713e0bd3-6f95-4415-8425-f029d0bfe74a"},{"source":"8d935e74-3b6d-47ac-979d-8daf9e36ef12","sourceHandle":"true","target":"4f22c7b5-ee00-479d-a24d-f7c70a17ada7","label":"SI","id":"xy-edge__8d935e74-3b6d-47ac-979d-8daf9e36ef12true-4f22c7b5-ee00-479d-a24d-f7c70a17ada7"},{"source":"f2d1f66e-d0f2-4051-8a6a-95bb5e889207","target":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","id":"xy-edge__f2d1f66e-d0f2-4051-8a6a-95bb5e889207-8c51ffee-edfb-4f32-8cc8-69e968e9a2d6"},{"source":"8c51ffee-edfb-4f32-8cc8-69e968e9a2d6","target":"b6138429-cde0-4452-bcf6-8ea8815b909e","id":"xy-edge__8c51ffee-edfb-4f32-8cc8-69e968e9a2d6-b6138429-cde0-4452-bcf6-8ea8815b909e"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"false","target":"a385ff63-f18e-4126-9a75-b3486f7b2765","label":"NO","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909efalse-a385ff63-f18e-4126-9a75-b3486f7b2765"},{"source":"b6138429-cde0-4452-bcf6-8ea8815b909e","sourceHandle":"true","target":"81fab6c7-e7b7-461f-ac18-724e9c2006db","label":"SI","id":"xy-edge__b6138429-cde0-4452-bcf6-8ea8815b909etrue-81fab6c7-e7b7-461f-ac18-724e9c2006db"}]}
2025-06-06 19:33:55.355 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Diagrama guardado en memoria.
2025-06-06 19:33:55.355 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo e84d6c64-57e9-4fd7-9afe-0959eef09d0e (type=out):
    └─ (sin handle) → 0f513150-f67e-4acd-b4a3-87c64563099e

2025-06-06 19:33:55.355 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 0f513150-f67e-4acd-b4a3-87c64563099e (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:33:55.355 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 6bfb98c3-66da-4ba0-aa81-ba150cf43c15 (type=out):
    └─ (sin handle) → c5b02e75-4828-454e-9e46-7bc40185bd6b

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo c5b02e75-4828-454e-9e46-7bc40185bd6b (type=in):
    └─ sourceHandle=error → 6bfb98c3-66da-4ba0-aa81-ba150cf43c15
    └─ sourceHandle=ok → f17ef2fc-5d0a-439e-81c3-f3916398d2c7
    └─ sourceHandle=ok → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 713e0bd3-6f95-4415-8425-f029d0bfe74a (type=out):
    └─ (sin handle) → f17ef2fc-5d0a-439e-81c3-f3916398d2c7

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 4f22c7b5-ee00-479d-a24d-f7c70a17ada7 (type=drv):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f17ef2fc-5d0a-439e-81c3-f3916398d2c7 (type=inVar):
    └─ (sin handle) → 36624594-8502-4026-b5ce-927fa280e552

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo f2d1f66e-d0f2-4051-8a6a-95bb5e889207 (type=inVar):
    └─ (sin handle) → 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 81fab6c7-e7b7-461f-ac18-724e9c2006db (type=out):
    (sin destinos – fin de flujo o nodo drv)

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo a385ff63-f18e-4126-9a75-b3486f7b2765 (type=out):
    └─ (sin handle) → f2d1f66e-d0f2-4051-8a6a-95bb5e889207

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 36624594-8502-4026-b5ce-927fa280e552 (type=svc):
    └─ (sin handle) → 8d935e74-3b6d-47ac-979d-8daf9e36ef12

2025-06-06 19:33:55.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8d935e74-3b6d-47ac-979d-8daf9e36ef12 (type=cond):
    └─ sourceHandle=false → 713e0bd3-6f95-4415-8425-f029d0bfe74a
    └─ sourceHandle=true → 4f22c7b5-ee00-479d-a24d-f7c70a17ada7

2025-06-06 19:33:55.357 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo 8c51ffee-edfb-4f32-8cc8-69e968e9a2d6 (type=svc):
    └─ (sin handle) → b6138429-cde0-4452-bcf6-8ea8815b909e

2025-06-06 19:33:55.357 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.service.bot.DiagramaService - Nodo b6138429-cde0-4452-bcf6-8ea8815b909e (type=cond):
    └─ sourceHandle=false → a385ff63-f18e-4126-9a75-b3486f7b2765
    └─ sourceHandle=true → 81fab6c7-e7b7-461f-ac18-724e9c2006db

2025-06-06 19:33:55.357 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  c.b.o.message.BotWhatsAppHandler - Diagrama almacenado exitosamente en memoria.
2025-06-06 19:34:04.926 [http-nio-0.0.0.0-8050-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 19:34:04.927 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 19:34:04.933 [http-nio-0.0.0.0-8050-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-06-06 19:34:04.990 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: aaa
2025-06-06 19:34:05.084 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library
2025-06-06 19:34:05.084 [http-nio-0.0.0.0-8050-exec-1] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library
2025-06-06 19:34:05.153 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> null
2025-06-06 19:34:05.154 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo inicial: e84d6c64-57e9-4fd7-9afe-0959eef09d0e
2025-06-06 19:34:05.154 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:05.154 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:34:05.154 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:05.154 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Bienvenido al Bot
2025-06-06 19:34:07.195 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 19:34:07.198 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=0f513150-f67e-4acd-b4a3-87c64563099e TTL=1800s
2025-06-06 19:34:07.199 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 0f513150-f67e-4acd-b4a3-87c64563099e
2025-06-06 19:34:07.199 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:07.199 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:34:07.199 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:07.199 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Ingrese una de las opciones con la cual quiere identificarse.
2025-06-06 19:34:07.839 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:34:07.840 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=c5b02e75-4828-454e-9e46-7bc40185bd6b TTL=1800s
2025-06-06 19:34:07.841 [http-nio-0.0.0.0-8050-exec-1] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:34:07.841 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:07.841 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 19:34:07.841 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:07.841 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN (Opciones): enviando menú ->
Selecciona una opción:
1. DNI
2. Legajo

2025-06-06 19:34:08.537 [http-nio-0.0.0.0-8050-exec-1] INFO  c.b.o.service.redis.RedisService - Redis SET key=inEsperando:5491169329545 value=true TTL=1800s
2025-06-06 19:34:11.712 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 1
2025-06-06 19:34:11.713 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> c5b02e75-4828-454e-9e46-7bc40185bd6b
2025-06-06 19:34:11.714 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:11.714 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo IN
2025-06-06 19:34:11.714 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:11.716 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentos:5491169329545 value=1 TTL=1800s
2025-06-06 19:34:11.717 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=1 TTL=1800s
2025-06-06 19:34:11.717 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): variable guardada -> DNI = '1'
2025-06-06 19:34:11.717 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] IN (Opciones): avanzando a nodo inVar f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:34:11.720 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inEsperando:5491169329545
2025-06-06 19:34:11.720 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentos:5491169329545
2025-06-06 19:34:11.721 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 19:34:11.722 [http-nio-0.0.0.0-8050-exec-2] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:34:11.722 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:11.722 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 19:34:11.722 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:11.724 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 19:34:12.531 [http-nio-0.0.0.0-8050-exec-2] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 19:34:47.041 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.controller.WebhookController - Mensaje recibido de 5491169329545: 222
2025-06-06 19:34:47.043 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:34:47.043 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.043 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 19:34:47.043 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.044 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=intentosVar:5491169329545:DNI value=1 TTL=1800s
2025-06-06 19:34:47.045 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=var:5491169329545:DNI value=222 TTL=1800s
2025-06-06 19:34:47.045 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] INVAR: variable DNI guardada = '222'
2025-06-06 19:34:47.045 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] INVAR: siguiente nodo -> 36624594-8502-4026-b5ce-927fa280e552
2025-06-06 19:34:47.045 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis DEL key=inVarEsperando:5491169329545:DNI
2025-06-06 19:34:47.045 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis DEL key=intentosVar:5491169329545:DNI
2025-06-06 19:34:47.046 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=36624594-8502-4026-b5ce-927fa280e552 TTL=1800s
2025-06-06 19:34:47.047 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 36624594-8502-4026-b5ce-927fa280e552
2025-06-06 19:34:47.047 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.047 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo Servicio
2025-06-06 19:34:47.047 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.047 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo SVC: invocando GET a http://localhost:8044/dni-chequeo
2025-06-06 19:34:47.175 [http-nio-0.0.0.0-8050-exec-5] ERROR c.b.o.service.bot.DiagramaMapper - Error invocando servicio GET http://localhost:8044/dni-chequeo: Error while extracting response for type [class java.lang.Boolean] and content type [application/json]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token
 at [Source: (PushbackInputStream); line: 1, column: 1]
org.springframework.web.client.RestClientException: Error while extracting response for type [class java.lang.Boolean] and content type [application/json]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token
 at [Source: (PushbackInputStream); line: 1, column: 1]
	at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:119)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:744)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:717)
	at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:336)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.invocarServicio(DiagramaMapper.java:485)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoSvc(DiagramaMapper.java:315)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:72)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.handleNodoInVar(DiagramaMapper.java:295)
	at coop.bancocredicoop.omnited.service.bot.DiagramaMapper.procesarMensaje(DiagramaMapper.java:69)
	at coop.bancocredicoop.omnited.controller.WebhookController.receiveMessage(WebhookController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token
 at [Source: (PushbackInputStream); line: 1, column: 1]
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:245)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:227)
	at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:104)
	... 61 common frames omitted
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.Boolean` out of START_OBJECT token
 at [Source: (PushbackInputStream); line: 1, column: 1]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1442)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1216)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1126)
	at com.fasterxml.jackson.databind.deser.std.NumberDeserializers$BooleanDeserializer._parseBoolean(NumberDeserializers.java:262)
	at com.fasterxml.jackson.databind.deser.std.NumberDeserializers$BooleanDeserializer.deserialize(NumberDeserializers.java:199)
	at com.fasterxml.jackson.databind.deser.std.NumberDeserializers$BooleanDeserializer.deserialize(NumberDeserializers.java:175)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4202)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3258)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:239)
	... 63 common frames omitted
2025-06-06 19:34:47.175 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo SVC: resultado servicio -> false
2025-06-06 19:34:47.176 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=bool:5491169329545 value=false TTL=1800s
2025-06-06 19:34:47.177 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=8d935e74-3b6d-47ac-979d-8daf9e36ef12 TTL=1800s
2025-06-06 19:34:47.177 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 8d935e74-3b6d-47ac-979d-8daf9e36ef12
2025-06-06 19:34:47.177 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.177 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo Condicion
2025-06-06 19:34:47.177 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo COND: valor booleano recibido -> false
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo COND: avanzando a -> 713e0bd3-6f95-4415-8425-f029d0bfe74a
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=713e0bd3-6f95-4415-8425-f029d0bfe74a TTL=1800s
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> 713e0bd3-6f95-4415-8425-f029d0bfe74a
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:47.178 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: enviando texto -> Su DNI no existe. Intente nuevamente.
2025-06-06 19:34:48.026 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo OUT: siguiente nodo -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:34:48.028 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=posicion:5491169329545 value=f17ef2fc-5d0a-439e-81c3-f3916398d2c7 TTL=1800s
2025-06-06 19:34:48.028 [http-nio-0.0.0.0-8050-exec-5] DEBUG c.b.o.service.redis.RedisService - Redis GET key=posicion:5491169329545 -> f17ef2fc-5d0a-439e-81c3-f3916398d2c7
2025-06-06 19:34:48.028 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:48.028 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR
2025-06-06 19:34:48.028 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - 
2025-06-06 19:34:48.029 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.bot.DiagramaMapper - [5491169329545] Nodo INVAR: enviando prompt -> Ingrese su DNI sin puntos
2025-06-06 19:34:49.497 [http-nio-0.0.0.0-8050-exec-5] INFO  c.b.o.service.redis.RedisService - Redis SET key=inVarEsperando:5491169329545:DNI value=true TTL=1800s
2025-06-06 19:35:26.640 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Waiting for workers to finish.
2025-06-06 19:35:27.376 [SpringContextShutdownHook] INFO  o.s.a.r.l.SimpleMessageListenerContainer - Successfully waited for workers to finish.
2025-06-06 19:35:27.381 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
